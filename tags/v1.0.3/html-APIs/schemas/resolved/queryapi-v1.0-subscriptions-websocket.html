---
layout: default
title: Schema queryapi-v1.0-subscriptions-websocket.json
---

<html>
<meta charset="UTF-8">
<h2>Schema queryapi-v1.0-subscriptions-websocket.json</h2>
<p>
    <a href="../../schemas/with-refs/queryapi-v1.0-subscriptions-websocket.html">Show referenced schemas with $ref</a>
</p>
<div id="json-render">
<script type="text/javascript" src="json-formatter.js"></script>
<script>
const formatter = new JSONFormatter.default(
{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Describes a data Grain sent via the a Query API websocket subscription",
    "properties": {
        "creation_timestamp": {
            "description": "TAI timestamp at which this data Grain was generated in the format <ts_secs>:<ts_nsecs>",
            "pattern": "^[0-9]+:[0-9]+$",
            "type": "string"
        },
        "duration": {
            "description": "Duration over which this Grain is valid or should be presented (if applicable)",
            "properties": {
                "denominator": {
                    "description": "Denominator of the Grain duration",
                    "minimum": 1,
                    "type": "integer"
                },
                "numerator": {
                    "description": "Numerator of the Grain duration",
                    "minimum": 0,
                    "type": "integer"
                }
            },
            "required": [
                "numerator",
                "denominator"
            ],
            "type": "object"
        },
        "flow_id": {
            "description": "Subscription ID under the /subscriptions/ resource of the Query API",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
            "type": "string"
        },
        "grain": {
            "description": "Payload of the data Grain",
            "properties": {
                "data": {
                    "description": "An array of changes which have occurred and are being passed to the subscription client",
                    "items": {
                        "description": "A single object identifying a change which has occurred under a particular API resource",
                        "properties": {
                            "path": {
                                "description": "ID of the resource which has undergone a change (may be a Node ID, Device ID etc.)",
                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                "type": "string"
                            },
                            "post": {
                                "description": "Representation of the resource undergoing a change after the change had occurred. Omitted if the resource no longer exists.",
                                "oneOf": [
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes the Node and the services which run on it",
                                        "properties": {
                                            "caps": {
                                                "description": "Capabilities (not yet defined)",
                                                "type": "object"
                                            },
                                            "hostname": {
                                                "description": "Node hostname (optional)",
                                                "format": "hostname",
                                                "type": "string"
                                            },
                                            "href": {
                                                "description": "HTTP access href for the Node's API",
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Node",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Node",
                                                "type": "string"
                                            },
                                            "services": {
                                                "description": "Array of objects containing a URN format type and href",
                                                "items": {
                                                    "properties": {
                                                        "href": {
                                                            "description": "URL to reach a service running on the Node",
                                                            "format": "uri",
                                                            "type": "string"
                                                        },
                                                        "type": {
                                                            "description": "URN identifying the type of service",
                                                            "format": "uri",
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "href",
                                                        "type"
                                                    ],
                                                    "type": "object"
                                                },
                                                "type": "array"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "href",
                                            "caps",
                                            "services"
                                        ],
                                        "title": "Node resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a Device",
                                        "properties": {
                                            "id": {
                                                "description": "Globally unique identifier for the Device",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Device",
                                                "type": "string"
                                            },
                                            "node_id": {
                                                "description": "Globally unique identifier for the Node which initially created the Device",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "receivers": {
                                                "description": "UUIDs of Receivers attached to the Device",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "senders": {
                                                "description": "UUIDs of Senders attached to the Device",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "type": {
                                                "description": "Device type URN",
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "type",
                                            "node_id",
                                            "senders",
                                            "receivers"
                                        ],
                                        "title": "Device resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a Source",
                                        "properties": {
                                            "caps": {
                                                "description": "Capabilities (not yet defined)",
                                                "type": "object"
                                            },
                                            "description": {
                                                "description": "Detailed description of the Source",
                                                "type": "string"
                                            },
                                            "device_id": {
                                                "description": "Globally unique identifier for the Device which initially created the Source",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "format": {
                                                "description": "Format of the data coming from the Source as a URN",
                                                "enum": [
                                                    "urn:x-nmos:format:video",
                                                    "urn:x-nmos:format:audio",
                                                    "urn:x-nmos:format:data"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Source",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Source",
                                                "type": "string"
                                            },
                                            "parents": {
                                                "description": "Array of UUIDs representing the Source IDs of Grains which came together at the input to this Source (may change over the lifetime of this Source)",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering Sources. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "format",
                                            "caps",
                                            "tags",
                                            "device_id",
                                            "parents"
                                        ],
                                        "title": "Source resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a Flow",
                                        "properties": {
                                            "description": {
                                                "description": "Detailed description of the Flow",
                                                "type": "string"
                                            },
                                            "format": {
                                                "description": "Format of the data coming from the Flow as a URN",
                                                "enum": [
                                                    "urn:x-nmos:format:video",
                                                    "urn:x-nmos:format:audio",
                                                    "urn:x-nmos:format:data"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Flow",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Flow",
                                                "type": "string"
                                            },
                                            "parents": {
                                                "description": "Array of UUIDs representing the Flow IDs of Grains which came together to generate this Flow (may change over the lifetime of this Flow)",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "source_id": {
                                                "description": "Globally unique identifier for the Source which initially created the Flow",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering Flows. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "format",
                                            "tags",
                                            "source_id",
                                            "parents"
                                        ],
                                        "title": "Flow resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a sender",
                                        "properties": {
                                            "description": {
                                                "description": "Detailed description of the Sender",
                                                "type": "string"
                                            },
                                            "device_id": {
                                                "description": "Device ID which this Sender forms part of",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "flow_id": {
                                                "description": "ID of the Flow currently passing via this Sender",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Sender",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Sender",
                                                "type": "string"
                                            },
                                            "manifest_href": {
                                                "description": "HTTP URL to a file describing how to connect to the Sender (SDP for RTP)",
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering Senders. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "transport": {
                                                "description": "Transport type used by the Sender in URN format",
                                                "enum": [
                                                    "urn:x-nmos:transport:rtp",
                                                    "urn:x-nmos:transport:rtp.ucast",
                                                    "urn:x-nmos:transport:rtp.mcast",
                                                    "urn:x-nmos:transport:dash"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "flow_id",
                                            "transport",
                                            "device_id",
                                            "manifest_href"
                                        ],
                                        "title": "Sender resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a receiver",
                                        "properties": {
                                            "caps": {
                                                "description": "Capabilities (not yet defined)",
                                                "type": "object"
                                            },
                                            "description": {
                                                "description": "Detailed description of the Receiver",
                                                "type": "string"
                                            },
                                            "device_id": {
                                                "description": "Device ID which this Receiver forms part of",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "format": {
                                                "description": "Type of Flow accepted by the Receiver as a URN",
                                                "enum": [
                                                    "urn:x-nmos:format:video",
                                                    "urn:x-nmos:format:audio",
                                                    "urn:x-nmos:format:data"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Receiver",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Receiver",
                                                "type": "string"
                                            },
                                            "subscription": {
                                                "description": "Object containing the 'sender_id' currently subscribed to. Sender_id should be null on initialisation.",
                                                "properties": {
                                                    "sender_id": {
                                                        "default": null,
                                                        "description": "UUID of the Sender that this Receiver is currently subscribed to",
                                                        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ]
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering sources. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "transport": {
                                                "description": "Transport type accepted by the Receiver in URN format",
                                                "enum": [
                                                    "urn:x-nmos:transport:rtp",
                                                    "urn:x-nmos:transport:rtp.ucast",
                                                    "urn:x-nmos:transport:rtp.mcast",
                                                    "urn:x-nmos:transport:dash"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "format",
                                            "caps",
                                            "tags",
                                            "device_id",
                                            "transport",
                                            "subscription"
                                        ],
                                        "title": "Receiver resource",
                                        "type": "object"
                                    }
                                ],
                                "type": "object"
                            },
                            "pre": {
                                "description": "Representation of the resource undergoing a change prior to the change occurring. Omitted if the resource didn't previously exist.",
                                "oneOf": [
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes the Node and the services which run on it",
                                        "properties": {
                                            "caps": {
                                                "description": "Capabilities (not yet defined)",
                                                "type": "object"
                                            },
                                            "hostname": {
                                                "description": "Node hostname (optional)",
                                                "format": "hostname",
                                                "type": "string"
                                            },
                                            "href": {
                                                "description": "HTTP access href for the Node's API",
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Node",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Node",
                                                "type": "string"
                                            },
                                            "services": {
                                                "description": "Array of objects containing a URN format type and href",
                                                "items": {
                                                    "properties": {
                                                        "href": {
                                                            "description": "URL to reach a service running on the Node",
                                                            "format": "uri",
                                                            "type": "string"
                                                        },
                                                        "type": {
                                                            "description": "URN identifying the type of service",
                                                            "format": "uri",
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "href",
                                                        "type"
                                                    ],
                                                    "type": "object"
                                                },
                                                "type": "array"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "href",
                                            "caps",
                                            "services"
                                        ],
                                        "title": "Node resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a Device",
                                        "properties": {
                                            "id": {
                                                "description": "Globally unique identifier for the Device",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Device",
                                                "type": "string"
                                            },
                                            "node_id": {
                                                "description": "Globally unique identifier for the Node which initially created the Device",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "receivers": {
                                                "description": "UUIDs of Receivers attached to the Device",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "senders": {
                                                "description": "UUIDs of Senders attached to the Device",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "type": {
                                                "description": "Device type URN",
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "type",
                                            "node_id",
                                            "senders",
                                            "receivers"
                                        ],
                                        "title": "Device resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a Source",
                                        "properties": {
                                            "caps": {
                                                "description": "Capabilities (not yet defined)",
                                                "type": "object"
                                            },
                                            "description": {
                                                "description": "Detailed description of the Source",
                                                "type": "string"
                                            },
                                            "device_id": {
                                                "description": "Globally unique identifier for the Device which initially created the Source",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "format": {
                                                "description": "Format of the data coming from the Source as a URN",
                                                "enum": [
                                                    "urn:x-nmos:format:video",
                                                    "urn:x-nmos:format:audio",
                                                    "urn:x-nmos:format:data"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Source",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Source",
                                                "type": "string"
                                            },
                                            "parents": {
                                                "description": "Array of UUIDs representing the Source IDs of Grains which came together at the input to this Source (may change over the lifetime of this Source)",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering Sources. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "format",
                                            "caps",
                                            "tags",
                                            "device_id",
                                            "parents"
                                        ],
                                        "title": "Source resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a Flow",
                                        "properties": {
                                            "description": {
                                                "description": "Detailed description of the Flow",
                                                "type": "string"
                                            },
                                            "format": {
                                                "description": "Format of the data coming from the Flow as a URN",
                                                "enum": [
                                                    "urn:x-nmos:format:video",
                                                    "urn:x-nmos:format:audio",
                                                    "urn:x-nmos:format:data"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Flow",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Flow",
                                                "type": "string"
                                            },
                                            "parents": {
                                                "description": "Array of UUIDs representing the Flow IDs of Grains which came together to generate this Flow (may change over the lifetime of this Flow)",
                                                "items": {
                                                    "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "source_id": {
                                                "description": "Globally unique identifier for the Source which initially created the Flow",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering Flows. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "format",
                                            "tags",
                                            "source_id",
                                            "parents"
                                        ],
                                        "title": "Flow resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a sender",
                                        "properties": {
                                            "description": {
                                                "description": "Detailed description of the Sender",
                                                "type": "string"
                                            },
                                            "device_id": {
                                                "description": "Device ID which this Sender forms part of",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "flow_id": {
                                                "description": "ID of the Flow currently passing via this Sender",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Sender",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Sender",
                                                "type": "string"
                                            },
                                            "manifest_href": {
                                                "description": "HTTP URL to a file describing how to connect to the Sender (SDP for RTP)",
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering Senders. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "transport": {
                                                "description": "Transport type used by the Sender in URN format",
                                                "enum": [
                                                    "urn:x-nmos:transport:rtp",
                                                    "urn:x-nmos:transport:rtp.ucast",
                                                    "urn:x-nmos:transport:rtp.mcast",
                                                    "urn:x-nmos:transport:dash"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "flow_id",
                                            "transport",
                                            "device_id",
                                            "manifest_href"
                                        ],
                                        "title": "Sender resource",
                                        "type": "object"
                                    },
                                    {
                                        "$schema": "http://json-schema.org/draft-04/schema#",
                                        "description": "Describes a receiver",
                                        "properties": {
                                            "caps": {
                                                "description": "Capabilities (not yet defined)",
                                                "type": "object"
                                            },
                                            "description": {
                                                "description": "Detailed description of the Receiver",
                                                "type": "string"
                                            },
                                            "device_id": {
                                                "description": "Device ID which this Receiver forms part of",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "format": {
                                                "description": "Type of Flow accepted by the Receiver as a URN",
                                                "enum": [
                                                    "urn:x-nmos:format:video",
                                                    "urn:x-nmos:format:audio",
                                                    "urn:x-nmos:format:data"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "id": {
                                                "description": "Globally unique identifier for the Receiver",
                                                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                "type": "string"
                                            },
                                            "label": {
                                                "description": "Freeform string label for the Receiver",
                                                "type": "string"
                                            },
                                            "subscription": {
                                                "description": "Object containing the 'sender_id' currently subscribed to. Sender_id should be null on initialisation.",
                                                "properties": {
                                                    "sender_id": {
                                                        "default": null,
                                                        "description": "UUID of the Sender that this Receiver is currently subscribed to",
                                                        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ]
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "tags": {
                                                "description": "Key value set of freeform string tags to aid in filtering sources. Values should be represented as an array of strings. Can be empty.",
                                                "patternProperties": {
                                                    "": {
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "transport": {
                                                "description": "Transport type accepted by the Receiver in URN format",
                                                "enum": [
                                                    "urn:x-nmos:transport:rtp",
                                                    "urn:x-nmos:transport:rtp.ucast",
                                                    "urn:x-nmos:transport:rtp.mcast",
                                                    "urn:x-nmos:transport:dash"
                                                ],
                                                "format": "uri",
                                                "type": "string"
                                            },
                                            "version": {
                                                "description": "String formatted TAI timestamp (<seconds>:<nanoseconds>) indicating precisely when an attribute of the resource last changed",
                                                "pattern": "^[0-9]+:[0-9]+$",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "id",
                                            "version",
                                            "label",
                                            "description",
                                            "format",
                                            "caps",
                                            "tags",
                                            "device_id",
                                            "transport",
                                            "subscription"
                                        ],
                                        "title": "Receiver resource",
                                        "type": "object"
                                    }
                                ],
                                "type": "object"
                            }
                        },
                        "required": [
                            "path"
                        ],
                        "type": "object"
                    },
                    "minItems": 1,
                    "type": "array",
                    "uniqueItems": true
                },
                "topic": {
                    "description": "Query API topic which has been subscribed to using this websocket",
                    "enum": [
                        "/nodes/",
                        "/devices/",
                        "/sources/",
                        "/flows/",
                        "/senders/",
                        "/receivers/"
                    ],
                    "type": "string"
                },
                "type": {
                    "description": "Format classifier for the data contained in this payload",
                    "enum": [
                        "urn:x-nmos:format:data.event"
                    ],
                    "format": "uri",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "topic",
                "data"
            ],
            "type": "object"
        },
        "grain_type": {
            "description": "Type of data contained within the 'grain' attribute's payload",
            "enum": [
                "event"
            ],
            "type": "string"
        },
        "origin_timestamp": {
            "description": "TAI timestamp at which this data Grain was generated in the format <ts_secs>:<ts_nsecs>",
            "pattern": "^[0-9]+:[0-9]+$",
            "type": "string"
        },
        "rate": {
            "description": "Rate at which Grains will be received within this Flow (if applicable)",
            "properties": {
                "denominator": {
                    "description": "Denominator of the Grain rate",
                    "minimum": 1,
                    "type": "integer"
                },
                "numerator": {
                    "description": "Numerator of the Grain rate",
                    "minimum": 0,
                    "type": "integer"
                }
            },
            "required": [
                "numerator",
                "denominator"
            ],
            "type": "object"
        },
        "source_id": {
            "description": "Source ID of the Query API instance issuing the data Grain",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
            "type": "string"
        },
        "sync_timestamp": {
            "description": "TAI timestamp at which this data Grain was generated in the format <ts_secs>:<ts_nsecs>",
            "pattern": "^[0-9]+:[0-9]+$",
            "type": "string"
        }
    },
    "required": [
        "grain_type",
        "source_id",
        "flow_id",
        "origin_timestamp",
        "sync_timestamp",
        "creation_timestamp",
        "rate",
        "duration",
        "grain"
    ],
    "title": "Query API data Grain",
    "type": "object"
}
,
    3, // Collapse depth
    {
        pathsToCollapse: [
            "properties.id"
        ],
        sortPropertiesBy: function(a, b) {
           if (a === "title") { return -1; }
           if (b === "title") { return 1; }
           if (a === "description") { return -1; }
           if (b === "description") { return 1; }
           return a > b;
        }
    });
document.getElementsByClassName("content")[0].appendChild(formatter.render());
</script>
</div>
</html>
